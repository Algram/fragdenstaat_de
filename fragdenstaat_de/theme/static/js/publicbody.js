!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.publicbody=t():(e.Froide=e.Froide||{},e.Froide.components=e.Froide.components||{},e.Froide.components.publicbody=t())}(window,function(){return function(e){function t(t){for(var n,i,u=t[0],a=t[1],c=t[2],d=0,p=[];d<u.length;d++)i=u[d],o[i]&&p.push(o[i][0]),o[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(l&&l(t);p.length;)p.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,u=1;u<s.length;u++){var a=s[u];0!==o[a]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=s[0]))}return e}var n={},o={6:0},r=[];function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=n,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window.webpackJsonp=window.webpackJsonp||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=a;return r.push(["../froide/frontend/javascript/publicbody.js",1]),s()}({"../froide/frontend/javascript/components/pb-action-list.vue":function(e,t,s){"use strict";s.r(t);var n=s("../froide/frontend/javascript/components/pb-action-list.vue?vue&type=template&id=8b532204&scoped=true"),o=s("../froide/frontend/javascript/components/pb-action-list.vue?vue&type=script&lang=js");for(var r in o)"default"!==r&&function(e){s.d(t,e,function(){return o[e]})}(r);s("../froide/frontend/javascript/components/pb-action-list.vue?vue&type=style&index=0&id=8b532204&lang=scss&scoped=true");var i=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=Object(i.a)(o.default,n.a,n.b,!1,null,"8b532204",null);t.default=u.exports},"../froide/frontend/javascript/components/pb-action-list.vue?vue&type=script&lang=js":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-action-list.vue?vue&type=script&lang=js"),o=s.n(n);for(var r in n)"default"!==r&&function(e){s.d(t,e,function(){return n[e]})}(r);t.default=o.a},"../froide/frontend/javascript/components/pb-action-list.vue?vue&type=style&index=0&id=8b532204&lang=scss&scoped=true":function(e,t,s){"use strict";var n=s("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js??ref--2-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/resolve-url-loader/index.js??ref--2-3!./node_modules/sass-loader/lib/loader.js??ref--2-4!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-action-list.vue?vue&type=style&index=0&id=8b532204&lang=scss&scoped=true");s.n(n).a},"../froide/frontend/javascript/components/pb-action-list.vue?vue&type=template&id=8b532204&scoped=true":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-result-container"},[e.hasSearchResults?s("p",[e._v("\n    "+e._s(e.i18n._("publicBodiesFound",{count:e.searchResultsLength}))+"\n  ")]):e._e(),e._v(" "),e.searchResultsLength>0||e.emptyResults?s("ul",{staticClass:"search-results list-unstyled"},e._l(e.searchResults,function(t){return s("li",{staticClass:"search-result",attrs:{"data-pbid":t.id},on:{click:function(t){return t.preventDefault(),e.selectSearchResult(t)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-8"},[s("h4",{staticClass:"pb-heading"},[e._v("\n            "+e._s(t.name)+"\n          ")]),e._v(" "),s("small",[e._v("\n            "+e._s(t.jurisdiction.name)+",\n            "+e._s(e.i18n._("requestCount",{count:t.number_of_requests}))+"\n          ")])]),e._v(" "),s("div",{staticClass:"col-sm-4"},[s("a",{staticClass:"btn btn-primary",attrs:{href:"#step-request","data-pbid":t.id},on:{click:function(t){return t.preventDefault(),e.selectSearchResult(t)}}},[e._v("\n            "+e._s(e.i18n.makeRequest)+"\n          ")])])])])})):e._e(),e._v(" "),e.hasSearchResults&&e.maxResultPage>1?s("ul",{staticClass:"pagination"},[e.hasPreviousSearchResults?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link prev",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.getPrevious(t)}}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("«")]),e._v(" "),s("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.previous))])])]):s("li",{staticClass:"page-item disabled"},[s("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("«")]),e._v(" "),s("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.previous))])])]),e._v(" "),s("li",{staticClass:"page-item disabled"},[s("span",{staticClass:"page-link"},[e._v("\n        "+e._s(e.currentResultPage)+" / "+e._s(e.maxResultPage)+"\n      ")])]),e._v(" "),e.hasNextSearchResults?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link next",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.getNext(t)}}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("»")]),e._v(" "),s("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.next))])])]):s("li",{staticClass:"page-item disabled"},[s("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"}},[s("span",{staticClass:"sr-only"},[e._v(e._s(e.i18n.next))]),e._v(" "),s("span",{attrs:{"aria-hidden":"true"}},[e._v("»")])])])]):e._e()])},o=[];s.d(t,"a",function(){return n}),s.d(t,"b",function(){return o})},"../froide/frontend/javascript/components/pb-multi-item.vue":function(e,t,s){"use strict";s.r(t);var n=s("../froide/frontend/javascript/components/pb-multi-item.vue?vue&type=template&id=34bc9232"),o=s("../froide/frontend/javascript/components/pb-multi-item.vue?vue&type=script&lang=js");for(var r in o)"default"!==r&&function(e){s.d(t,e,function(){return o[e]})}(r);var i=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);t.default=u.exports},"../froide/frontend/javascript/components/pb-multi-item.vue?vue&type=script&lang=js":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-multi-item.vue?vue&type=script&lang=js"),o=s.n(n);for(var r in n)"default"!==r&&function(e){s.d(t,e,function(){return n[e]})}(r);t.default=o.a},"../froide/frontend/javascript/components/pb-multi-item.vue?vue&type=template&id=34bc9232":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"checkbox","data-label":e.result.name,name:e.name},domProps:{value:e.result.id,checked:Array.isArray(e.value)?e._i(e.value,e.result.id)>-1:e.value},on:{change:function(t){var s=e.value,n=t.target,o=!!n.checked;if(Array.isArray(s)){var r=e.result.id,i=e._i(s,r);n.checked?i<0&&(e.value=s.concat([r])):i>-1&&(e.value=s.slice(0,i).concat(s.slice(i+1)))}else e.value=o}}}),e._v("\n  "+e._s(e.result.name)+"\n  "),s("small",[e._v("\n    "+e._s(e.result.jurisdiction.name)+"\n  ")])])},o=[];s.d(t,"a",function(){return n}),s.d(t,"b",function(){return o})},"../froide/frontend/javascript/components/pb-multi-list.vue":function(e,t,s){"use strict";s.r(t);var n=s("../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=template&id=17f79f95&scoped=true"),o=s("../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=script&lang=js");for(var r in o)"default"!==r&&function(e){s.d(t,e,function(){return o[e]})}(r);s("../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=style&index=0&id=17f79f95&lang=scss&scoped=true");var i=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=Object(i.a)(o.default,n.a,n.b,!1,null,"17f79f95",null);t.default=u.exports},"../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=script&lang=js":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=script&lang=js"),o=s.n(n);for(var r in n)"default"!==r&&function(e){s.d(t,e,function(){return n[e]})}(r);t.default=o.a},"../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=style&index=0&id=17f79f95&lang=scss&scoped=true":function(e,t,s){"use strict";var n=s("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js??ref--2-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/resolve-url-loader/index.js??ref--2-3!./node_modules/sass-loader/lib/loader.js??ref--2-4!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=style&index=0&id=17f79f95&lang=scss&scoped=true");s.n(n).a},"../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=template&id=17f79f95&scoped=true":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.searchResults.length>0||e.emptyResults?s("div",[s("div",[s("a",{directives:[{name:"show",rawName:"v-show",value:e.hasPublicBodies,expression:"hasPublicBodies"}],staticClass:"btn btn-primary",attrs:{href:"#step-request"},on:{click:e.setStepRequest}},[e._v("\n        Continue\n      ")]),e._v(" "),e.hasSearchResults?s("a",{staticClass:"btn btn-light pull-right",attrs:{href:"#"},on:{click:e.selectAll}},[e._v("\n        Select all\n      ")]):e._e()]),e._v(" "),s("ul",{staticClass:"search-results list-unstyled"},e._l(e.searchResults,function(t){return s("li",{staticClass:"search-result"},[s("pb-multi-item",{attrs:{name:e.name,result:t,scope:e.scope}})],1)})),e._v(" "),e.hasPublicBodies?s("p",[s("a",{staticClass:"btn btn-primary",attrs:{href:"#step-request"},on:{click:e.setStepRequest}},[e._v("\n        Continue\n      ")])]):e._e()]):e._e()])},o=[];s.d(t,"a",function(){return n}),s.d(t,"b",function(){return o})},"../froide/frontend/javascript/components/pb-result-list.vue":function(e,t,s){"use strict";s.r(t);var n=s("../froide/frontend/javascript/components/pb-result-list.vue?vue&type=template&id=5e2a1b06&scoped=true"),o=s("../froide/frontend/javascript/components/pb-result-list.vue?vue&type=script&lang=js");for(var r in o)"default"!==r&&function(e){s.d(t,e,function(){return o[e]})}(r);s("../froide/frontend/javascript/components/pb-result-list.vue?vue&type=style&index=0&id=5e2a1b06&lang=scss&scoped=true");var i=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=Object(i.a)(o.default,n.a,n.b,!1,null,"5e2a1b06",null);t.default=u.exports},"../froide/frontend/javascript/components/pb-result-list.vue?vue&type=script&lang=js":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-result-list.vue?vue&type=script&lang=js"),o=s.n(n);for(var r in n)"default"!==r&&function(e){s.d(t,e,function(){return n[e]})}(r);t.default=o.a},"../froide/frontend/javascript/components/pb-result-list.vue?vue&type=style&index=0&id=5e2a1b06&lang=scss&scoped=true":function(e,t,s){"use strict";var n=s("./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js??ref--2-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/resolve-url-loader/index.js??ref--2-3!./node_modules/sass-loader/lib/loader.js??ref--2-4!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-result-list.vue?vue&type=style&index=0&id=5e2a1b06&lang=scss&scoped=true");s.n(n).a},"../froide/frontend/javascript/components/pb-result-list.vue?vue&type=template&id=5e2a1b06&scoped=true":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.publicBody&&!e.hasSearchResults?s("div",{staticClass:"search-result"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"radio","data-label":e.publicBody.name,name:e.name},domProps:{value:e.publicBody.id,checked:e._q(e.value,e.publicBody.id)},on:{change:function(t){e.value=e.publicBody.id}}}),e._v("\n      "+e._s(e.publicBody.name)+"\n      "),s("small",[e._v("\n        "+e._s(e.publicBody.jurisdiction.name)+"\n      ")])])]):e._e(),e._v(" "),e.searchResults.length>0||e.emptyResults?s("ul",{staticClass:"search-results list-unstyled"},e._l(e.searchResults,function(t){return s("li",{staticClass:"search-result"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"radio","data-label":t.name,name:e.name},domProps:{value:t.id,checked:e._q(e.value,t.id)},on:{change:[function(s){e.value=t.id},e.selectSearchResult],click:e.selectSearchResult}}),e._v("\n        "+e._s(t.name)+"\n        "),s("small",[e._v("\n          "+e._s(t.jurisdiction.name)+"\n        ")])])])})):e._e()])},o=[];s.d(t,"a",function(){return n}),s.d(t,"b",function(){return o})},"../froide/frontend/javascript/components/publicbody-chooser.vue":function(e,t,s){"use strict";s.r(t);var n=s("../froide/frontend/javascript/components/publicbody-chooser.vue?vue&type=template&id=fe76df5c"),o=s("../froide/frontend/javascript/components/publicbody-chooser.vue?vue&type=script&lang=js");for(var r in o)"default"!==r&&function(e){s.d(t,e,function(){return o[e]})}(r);var i=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);t.default=u.exports},"../froide/frontend/javascript/components/publicbody-chooser.vue?vue&type=script&lang=js":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/publicbody-chooser.vue?vue&type=script&lang=js"),o=s.n(n);for(var r in n)"default"!==r&&function(e){s.d(t,e,function(){return n[e]})}(r);t.default=o.a},"../froide/frontend/javascript/components/publicbody-chooser.vue?vue&type=template&id=fe76df5c":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"publicbody-chooser mb-3"},[s("div",{staticClass:"form-search"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model:value",value:e.search,expression:"search",arg:"value"}],staticClass:"search-public_bodies form-control",attrs:{type:"search",placeholder:e.i18n.publicBodySearchPlaceholder},domProps:{value:e.search},on:{keyup:e.triggerAutocomplete,keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.triggerAutocomplete(t)):null},input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary search-public_bodies-submit",attrs:{type:"button"},on:{click:e.triggerAutocomplete}},[s("i",{staticClass:"fa fa-search"}),e._v("\n          "+e._s(e.i18n.search)+"\n        ")])])])]),e._v(" "),e.searching?s("div",{staticClass:"search-spinner"},[s("img",{attrs:{src:e.config.resources.spinner,alt:"Loading..."}})]):e._e(),e._v(" "),s(e.getListView,{tag:"component",attrs:{name:e.name,scope:e.scope,i18n:e.i18n}})],1)},o=[];s.d(t,"a",function(){return n}),s.d(t,"b",function(){return o})},"../froide/frontend/javascript/lib/i18n-mixin.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o=new RegExp(/\$\{(\w+)\}/g),r=document.querySelector("html").lang,i={computed:{i18n:function(){return n({_replacer:function(e){return function(t,s,n,o){return"count"===s&&e.count>=1e3?e.count.toLocaleString(r):e[s]}},_:function(e,t){var s=this[e];return Array.isArray(s)?void 0!==t.count&&(t.count>1||0===t.count)?s[1].replace(o,this._replacer(t)):s[0].replace(o,this._replacer(t)):s.replace(o,this._replacer(t))}},this.config.i18n)}}};t.default=i},"../froide/frontend/javascript/lib/pb-chooser-mixin.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o=s("../froide/node_modules/underscore/underscore.js"),r=s("../froide/node_modules/vuex/dist/vuex.esm.js"),i=s("../froide/frontend/javascript/store/mutation_types.js"),u={created:function(){if(this.hasForm&&this.field.value){var e=this.field.objects;this.cachePublicBodies(e),this.setPublicBodies({publicBodies:e,scope:this.scope})}},computed:n({help_url:function(){return this.config.url.helpAbout},hasForm:function(){return void 0!==this.formJson&&null!==this.formJson&&""!==this.formJson},_form:function(){return JSON.parse(this.formJson)},form:function(){return this._form.fields},field:function(){return this.form[this.name]},errors:function(){return this._form.errors},hasPublicBodies:function(){return this.publicBodies.length>0},debouncedAutocomplete:function(){return(0,o.debounce)(this.runAutocomplete,300)},hasFilters:function(){return!!this.filters&&Object.keys(this.filters).length>0},hasSearchResults:function(){return this.searchResults.length>0},searchResults:function(){return this.getScopedSearchResults(this.scope)}},(0,r.mapGetters)(["getPublicBodyByScope","getScopedSearchResults","getScopedSearchMeta"])),methods:n({buildQuery:function(){var e=this.search;return this.hasFilters&&(e+=JSON.stringify(this.filters)),e},triggerAutocomplete:function(){(""!==this.search||this.hasFilters||(this.searching=!1),!this.allowEmptySearch&&void 0!==this.search&&this.search.length<3&&!this.hasFilters)?this.searching=!1:this.buildQuery()!==this.lastQuery||0===this.searchResults.length?(this.searching=!0,this.debouncedAutocomplete()):this.searching=!1},runAutocomplete:function(){var e=this;return this.searching=!0,this.lastQuery=this.buildQuery(),this.getSearchResults({scope:this.scope,search:this.search,filters:this.filters}).then(function(){e.searching=!1})},clearResults:function(){this.clearSearchResults({scope:this.scope})}},(0,r.mapMutations)({setPublicBody:i.SET_PUBLICBODY,setPublicBodies:i.SET_PUBLICBODIES,setSearchResults:i.SET_SEARCHRESULTS,cachePublicBodies:i.CACHE_PUBLICBODIES,clearSearchResults:i.CLEAR_SEARCHRESULTS}),(0,r.mapActions)(["getSearchResults"]))};t.default=u},"../froide/frontend/javascript/lib/pb-list-mixin.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o=s("../froide/node_modules/vuex/dist/vuex.esm.js"),r=s("../froide/frontend/javascript/store/mutation_types.js"),i={computed:n({publicBody:function(){return this.getPublicBodyByScope(this.scope)},publicBodies:function(){return this.getPublicBodiesByScope(this.scope)},hasPublicBodies:function(){return this.publicBodies.length>0},searchResults:function(){return this.getScopedSearchResults(this.scope)},hasSearchResults:function(){return this.searchResults.length>0},hasNextSearchResults:function(){var e=this.getScopedSearchMeta(this.scope);return!!e&&e.next},hasPreviousSearchResults:function(){var e=this.getScopedSearchMeta(this.scope);return!!e&&e.previous},currentResultPage:function(){var e=this.getScopedSearchMeta(this.scope);return e?e.offset/e.limit+1:0},maxResultPage:function(){var e=this.getScopedSearchMeta(this.scope);return e?Math.ceil(e.total_count/e.limit):0},currentResultsLength:function(){var e=this.searchResults;return e?e.length:null},searchResultsLength:function(){var e=this.getScopedSearchMeta(this.scope);return e?e.total_count:0},emptyResults:function(){var e=this.searchResultsLength;return null!==e&&0===e}},(0,o.mapGetters)(["getPublicBody","getPublicBodyByScope","getPublicBodiesByScope","getScopedSearchResults","getScopedSearchMeta"])),methods:n({getNext:function(e){this.getNextSearchResults(this.scope)},getPrevious:function(e){this.getPreviousSearchResults(this.scope)}},(0,o.mapMutations)({setPublicBody:r.SET_PUBLICBODY,clearSearchResults:r.CLEAR_SEARCHRESULTS}),(0,o.mapActions)(["getNextSearchResults","getPreviousSearchResults"]))};t.default=i},"../froide/frontend/javascript/lib/search.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}();var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t}return n(e,[{key:"getJson",value:function(e){return new Promise(function(t,s){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){if(n.status>=400)return s(n.responseText);t(JSON.parse(n.responseText))},n.onerror=function(){s(n.statusText)},n.send()})}},{key:"getObjects",value:function(e){return new Promise(function(t,s){e.then(function(e){return t(e.objects)}).catch(function(e){return s(e)})})}},{key:"getJsonObjects",value:function(e){var t=this;return new Promise(function(s,n){t.getJson(e).then(function(e){return s(e.objects)}).catch(function(e){return n(e)})})}},{key:"getPublicBody",value:function(e){var t=this.config.url.getPublicBody.replace(/\/0\//,"/"+e+"/");return this.getJson(t)}},{key:"autocompletePublicBody",value:function(e){var t=encodeURIComponent(e),s=this.config.url.autocompletePublicBody+"?query="+t;return this.getJsonObjects(s)}},{key:"getJsonForUrl",value:function(e,t,s){var n=!1;return void 0!==t&&t&&(n=!0,e=e+"?q="+encodeURIComponent(t)),void 0!==s&&function(){var t=[],o=function(e){var n=s[e];null!==n&&(Array.isArray(n)||(n=[n]),n.forEach(function(s){t.push(e+"="+encodeURIComponent(s))}))};for(var r in s)o(r);e+=n?"&":"?",e+=t.join("&")}(),this.getJson(e)}},{key:"searchPublicBodies",value:function(e,t){return this.getJsonForUrl(this.config.url.searchPublicBody,e,t)}},{key:"listPublicBodies",value:function(e,t){return this.getJsonForUrl(this.config.url.listPublicBodies,e,t)}},{key:"listJurisdictions",value:function(e,t){return this.getJsonForUrl(this.config.url.listJurisdictions,e,t)}},{key:"listCategories",value:function(e,t){return this.getJsonForUrl(this.config.url.listCategories,e,t)}},{key:"listClassifications",value:function(e,t){return this.getJsonForUrl(this.config.url.listClassifications,e,t)}},{key:"searchFoiRequests",value:function(e){var t=encodeURIComponent(e),s=this.config.url.searchRequests+"?q="+t;return this.getJsonObjects(s)}}]),e}();t.FroideSearch=o},"../froide/frontend/javascript/publicbody.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(s("../froide/node_modules/vue/dist/vue.esm.js")),o=u(s("../froide/frontend/javascript/store/index.js")),r=s("../froide/frontend/javascript/store/mutation_types.js"),i=u(s("../froide/frontend/javascript/components/publicbody-chooser.vue"));function u(e){return e&&e.__esModule?e:{default:e}}n.default.config.productionTip=!1,e.exports={createPublicbodyChooser:function(e,t){o.default.commit(r.SET_CONFIG,t),new n.default({store:o.default,data:{config:t},components:{PublicbodyChooser:i.default},el:e})}},t.default=e.exports},"../froide/frontend/javascript/store/index.js":function(e,t,s){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},i=l(s("../froide/node_modules/vue/dist/vue.esm.js")),u=l(s("../froide/node_modules/vuex/dist/vuex.esm.js")),a=s("../froide/frontend/javascript/store/mutation_types.js"),c=s("../froide/frontend/javascript/lib/search.js");function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}i.default.use(u.default);t.default=new u.default.Store({state:{config:null,scopedSearchResults:{},scopedSearchFacets:{},scopedSearchMeta:{},scopedPublicBodies:{},publicBodies:{},lawType:null,user:{},step:a.STEPS.SELECT_PUBLICBODY,subject:"",body:"",fullText:!1},getters:{getPublicBodyByScope:function(e,t){return function(e){var s=t.getPublicBodiesByScope(e);return 0===s.length?null:s[0]}},getPublicBodiesByScope:function(e,t){return function(t){var s=e.scopedPublicBodies[t];return void 0===s?[]:s}},isPublicBodySelectedByScope:function(e,t){return function(t,s){var n=e.scopedPublicBodies[t];return void 0!==n&&n.some(function(e){return e.id===s})}},getPublicBody:function(e,t){return function(t){return e.publicBodies[t]}},getScopedSearchResults:function(e,t){return function(t){var s=e.scopedSearchResults[t];return void 0===s?[]:s}},getScopedSearchFacets:function(e,t){return function(t){var s=e.scopedSearchFacets[t];return void 0===s?null:s}},getScopedSearchMeta:function(e,t){return function(t){var s=e.scopedSearchMeta[t];return void 0===s?null:s}},defaultLaw:function(e){var t=function(e,t){return e.meta&&t.meta?0:e.meta?-1:t.meta?1:0},s=null;for(s in e.scopedPublicBodies);for(var n=e.scopedPublicBodies[s],o=null,r=!0,i=0;i<n.length;i+=1){var u=n[i].laws.filter(function(t){return!e.lawType||t.law_type===e.lawType});if(u=u.sort(t),0!==i){if(o.id!==u[0].id){r=!1;break}o=u[0]}else o=u[0]}return r?o:null},user:function(e){return e.user},subject:function(e){return e.subject},getSubject:function(e){return function(){return e.subject}},body:function(e){return e.body},fullText:function(e){return e.fullText},stepSelectPublicBody:function(e){return e.step===a.STEPS.SELECT_PUBLICBODY},stepReviewReady:function(e){return e.step>=a.STEPS.WRITE_REQUEST},lawType:function(e){return e.lawType}},mutations:(n={},d(n,a.SET_CONFIG,function(e,t){e.config=t}),d(n,a.SET_STEP,function(e,t){e.step=t}),d(n,a.SET_STEP_PUBLICBODY,function(e){e.step=a.STEPS.SELECT_PUBLICBODY}),d(n,a.SET_STEP_REQUEST,function(e){e.step=a.STEPS.WRITE_REQUEST}),d(n,a.SET_PUBLICBODY,function(e,t){var s=t.publicBody,n=t.scope;i.default.set(e.scopedPublicBodies,n,[s])}),d(n,a.SET_PUBLICBODIES,function(e,t){var s=t.publicBodies,n=t.scope;i.default.set(e.scopedPublicBodies,n,s)}),d(n,a.SET_PUBLICBODY_ID,function(e,t){var s=t.publicBodyId,n=t.scope,o=e.publicBodies[s];i.default.set(e.scopedPublicBodies,n,[o])}),d(n,a.ADD_PUBLICBODY_ID,function(e,t){var s=t.publicBodyId,n=t.scope,o=e.publicBodies[s];if(void 0!==o){var r=e.scopedPublicBodies[n];if(void 0===r)i.default.set(e.scopedPublicBodies,n,[o]);else r.some(function(e){return e.id===o.id})||i.default.set(e.scopedPublicBodies,n,[].concat(function(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}(r),[o]))}}),d(n,a.REMOVE_PUBLICBODY_ID,function(e,t){var s=t.publicBodyId,n=t.scope,o=e.scopedPublicBodies[n];void 0!==o&&(o=o.filter(function(e){return e.id!==s}),i.default.set(e.scopedPublicBodies,n,o))}),d(n,a.CLEAR_PUBLICBODIES,function(e,t){var s=t.scope;i.default.set(e.scopedPublicBodies,s,[])}),d(n,a.CACHE_PUBLICBODIES,function(e,t){var s={};t.forEach(function(e){s[e.id]=e}),e.publicBodies=r({},e.publicBodies,s)}),d(n,a.SET_SEARCHRESULTS,function(e,t){var s=t.searchResults,n=t.searchFacets,o=t.searchMeta,r=t.scope;i.default.set(e.scopedSearchResults,r,s),i.default.set(e.scopedSearchFacets,r,n),i.default.set(e.scopedSearchMeta,r,o)}),d(n,a.CLEAR_SEARCHRESULTS,function(e,t){var s=t.scope;i.default.set(e.scopedSearchResults,s,[]),i.default.set(e.scopedSearchFacets,s,{}),i.default.set(e.scopedSearchMeta,s,null)}),d(n,a.UPDATE_FULL_TEXT,function(e,t){e.fullText=t}),d(n,a.SET_USER,function(e,t){e.user=t}),d(n,a.UPDATE_SUBJECT,function(e,t){e.subject=t}),d(n,a.UPDATE_BODY,function(e,t){e.body=t}),d(n,a.UPDATE_FIRST_NAME,function(e,t){i.default.set(e.user,"first_name",t)}),d(n,a.UPDATE_LAST_NAME,function(e,t){i.default.set(e.user,"last_name",t)}),d(n,a.UPDATE_ADDRESS,function(e,t){i.default.set(e.user,"address",t)}),d(n,a.UPDATE_EMAIL,function(e,t){i.default.set(e.user,"email",t)}),d(n,a.UPDATE_PRIVATE,function(e,t){i.default.set(e.user,"private",t)}),d(n,a.UPDATE_USER_ID,function(e,t){i.default.set(e.user,"id",t)}),d(n,a.UPDATE_LAW_TYPE,function(e,t){e.lawType=t}),n),actions:(o={},d(o,a.SET_STEP_BY_URL,function(e,t){var s=e.commit,n=e.getters,o=t.hash,r=t.scope,i=a.URLS_TO_STEP[o];if(void 0!==i){var u=n.getPublicBodiesByScope(r);i>a.STEPS.SELECT_PUBLICBODY&&0===u.length||s(a.SET_STEP,i)}}),d(o,"setSearchResults",function(e,t){var s=e.commit,n=t.scope,o=t.results;s(a.SET_SEARCHRESULTS,{searchResults:o.objects.results,searchFacets:o.objects.facets.fields,searchMeta:o.meta,scope:n}),s(a.CACHE_PUBLICBODIES,o.objects.results)}),d(o,"getSearchResults",function(e,t){var s=e.commit,n=e.state,o=e.dispatch,r=t.scope,i=t.search,u=t.filters;return s(a.CLEAR_SEARCHRESULTS,{scope:r}),new c.FroideSearch(n.config).searchPublicBodies(i,u).then(function(e){o("setSearchResults",{results:e,scope:r})})}),d(o,"getSearchResultsUrl",function(e,t){var s=e.commit,n=e.state,o=(e.getters,e.dispatch),r=t.scope,i=t.url;return s(a.CLEAR_SEARCHRESULTS,{scope:r}),new c.FroideSearch(n.config).getJson(i).then(function(e){o("setSearchResults",{results:e,scope:r})})}),d(o,"getNextSearchResults",function(e,t){e.state;var s=e.getters;return(0,e.dispatch)("getSearchResultsUrl",{url:s.getScopedSearchMeta(t).next,scope:t})}),d(o,"getPreviousSearchResults",function(e,t){e.state;var s=e.getters;return(0,e.dispatch)("getSearchResultsUrl",{url:s.getScopedSearchMeta(t).previous,scope:t})}),o),strict:!1})},"../froide/frontend/javascript/store/mutation_types.js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SET_CONFIG="SET_CONFIG",t.SET_STEP="SET_STEP",t.SET_STEP_PUBLICBODY="SET_STEP_PUBLICBODY",t.SET_STEP_REQUEST="SET_STEP_REQUEST",t.SET_STEP_BY_URL="SET_STEP_BY_URL",t.SET_PUBLICBODY="SET_PUBLICBODY",t.SET_PUBLICBODY_ID="SET_PUBLICBODY_ID",t.ADD_PUBLICBODY_ID="ADD_PUBLICBODY_ID",t.REMOVE_PUBLICBODY_ID="REMOVE_PUBLICBODY_ID",t.CLEAR_PUBLICBODIES="CLEAR_PUBLICBODIES",t.SET_PUBLICBODIES="SET_PUBLICBODIES",t.CACHE_PUBLICBODIES="CACHE_PUBLICBODIES",t.UPDATE_LAW_TYPE="UPDATE_LAW_TYPE",t.SET_SEARCHRESULTS="SET_SEARCHRESULTS",t.CLEAR_SEARCHRESULTS="CLEAR_SEARCHRESULTS",t.UPDATE_SUBJECT="UPDATE_SUBJECT",t.UPDATE_BODY="UPDATE_BODY",t.UPDATE_FULL_TEXT="UPDATE_FULL_TEXT",t.SET_USER="SET_USER",t.UPDATE_FIRST_NAME="UPDATE_FIRST_NAME",t.UPDATE_LAST_NAME="UPDATE_LAST_NAME",t.UPDATE_EMAIL="UPDATE_EMAIL",t.UPDATE_ADDRESS="UPDATE_ADDRESS",t.UPDATE_PRIVATE="UPDATE_PRIVATE",t.UPDATE_USER_ID="UPDATE_USER_ID",t.STEPS={SELECT_PUBLICBODY:1,WRITE_REQUEST:3};var n=t.URLS_TO_STEP={"#step-publicbody":1,"#step-request":3},o=t.STEP_TO_URLS={};for(var r in n)o[n[r]]=r},"./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-action-list.vue?vue&type=script&lang=js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},r=s("../froide/node_modules/vuex/dist/vuex.esm.js"),i=s("../froide/frontend/javascript/store/mutation_types.js"),u=s("../froide/frontend/javascript/lib/pb-list-mixin.js"),a=(n=u)&&n.__esModule?n:{default:n};t.default={name:"pb-action-list",mixins:[a.default],props:["name","scope","i18n"],methods:o({selectSearchResult:function(e){var t=e.currentTarget.dataset.pbid;this.setPublicBodyId({publicBodyId:t,scope:this.scope}),this.setStepRequest(),window.history.pushState(null,"","#step-request"),window.scrollTo(0,0)}},(0,r.mapMutations)({setStepRequest:i.SET_STEP_REQUEST,setPublicBodyId:i.SET_PUBLICBODY_ID}))}},"./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-multi-item.vue?vue&type=script&lang=js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o=s("../froide/node_modules/vuex/dist/vuex.esm.js"),r=s("../froide/frontend/javascript/store/mutation_types.js");t.default={name:"pb-multi-item",props:["name","result","scope"],computed:n({value:{get:function(){return this.isPublicBodySelectedByScope(this.scope,this.result.id)},set:function(e){e?this.addPublicBodyId({publicBodyId:this.result.id,scope:this.scope}):this.removePublicBodyId({publicBodyId:this.result.id,scope:this.scope})}}},(0,o.mapGetters)(["isPublicBodySelectedByScope"])),methods:n({selectSearchResult:function(e){this.value=e.target.value}},(0,o.mapMutations)({addPublicBodyId:r.ADD_PUBLICBODY_ID,removePublicBodyId:r.REMOVE_PUBLICBODY_ID}))}},"./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=script&lang=js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o=s("../froide/node_modules/vuex/dist/vuex.esm.js"),r=s("../froide/frontend/javascript/store/mutation_types.js"),i=a(s("../froide/frontend/javascript/lib/pb-list-mixin.js")),u=a(s("../froide/frontend/javascript/components/pb-multi-item.vue"));function a(e){return e&&e.__esModule?e:{default:e}}t.default={name:"pb-multi-list",props:["name","scope","i18n"],mixins:[i.default],methods:n({selectAll:function(){var e=this;this.searchResults.forEach(function(t){e.addPublicBodyId({publicBodyId:t.id,scope:e.scope})})}},(0,o.mapMutations)({setStepRequest:r.SET_STEP_REQUEST,addPublicBodyId:r.ADD_PUBLICBODY_ID})),components:{PbMultiItem:u.default}}},"./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-result-list.vue?vue&type=script&lang=js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=s("../froide/frontend/javascript/lib/pb-list-mixin.js"),r=(n=o)&&n.__esModule?n:{default:n};t.default={name:"pb-result-list",props:["name","scope","i18n"],mixins:[r.default],computed:{value:{get:function(){if(this.publicBody)return this.publicBody.id},set:function(e){this.setPublicBody({publicBody:this.getPublicBody(e),scope:this.scope}),this.clearSearchResults({scope:this.scope})}}},methods:{selectSearchResult:function(e){this.value=e.target.value}}}},"./node_modules/babel-loader/lib/index.js??ref--0!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/publicbody-chooser.vue?vue&type=script&lang=js":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(s("../froide/frontend/javascript/components/pb-result-list.vue")),o=a(s("../froide/frontend/javascript/components/pb-action-list.vue")),r=a(s("../froide/frontend/javascript/components/pb-multi-list.vue")),i=a(s("../froide/frontend/javascript/lib/pb-chooser-mixin.js")),u=a(s("../froide/frontend/javascript/lib/i18n-mixin.js"));function a(e){return e&&e.__esModule?e:{default:e}}t.default={name:"publicbody-chooser",mixins:[i.default,u.default],props:["name","scope","defaultsearch","formJson","config","listView"],data:function(){return{search:this.defaultsearch,lastQuery:null,emptyResults:!1,searching:!1}},components:{resultList:n.default,actionList:o.default,multi:r.default},computed:{getListView:function(){return this.listView?this.listView:"resultList"},label:function(){if(this.publicBody)return this.publicBody.name},publicBody:function(){return this.getPublicBodyByScope(this.scope)}},watch:{defaultsearch:function(){this.triggerAutocomplete()}}}},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js??ref--2-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/resolve-url-loader/index.js??ref--2-3!./node_modules/sass-loader/lib/loader.js??ref--2-4!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-action-list.vue?vue&type=style&index=0&id=8b532204&lang=scss&scoped=true":function(e,t,s){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js??ref--2-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/resolve-url-loader/index.js??ref--2-3!./node_modules/sass-loader/lib/loader.js??ref--2-4!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-multi-list.vue?vue&type=style&index=0&id=17f79f95&lang=scss&scoped=true":function(e,t,s){},"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js??ref--2-1!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/resolve-url-loader/index.js??ref--2-3!./node_modules/sass-loader/lib/loader.js??ref--2-4!./node_modules/vue-loader/lib/index.js??vue-loader-options!../froide/frontend/javascript/components/pb-result-list.vue?vue&type=style&index=0&id=5e2a1b06&lang=scss&scoped=true":function(e,t,s){}})});
//# sourceMappingURL=publicbody.js.map